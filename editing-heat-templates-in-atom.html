<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>Editing Heat Templates in Atom</title>
        <link rel="stylesheet" href="/theme/css/main.css" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">garettmd </a></h1>
                <nav><ul>
                    <li><a href="/category/automation.html">automation</a></li>
                    <li class="active"><a href="/category/misc.html">misc</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="/editing-heat-templates-in-atom.html" rel="bookmark"
           title="Permalink to Editing Heat Templates in Atom">Editing Heat Templates in Atom</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-08-18T00:00:00-04:00">
                Published: Thu 18 August 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="/author/garett.html">Garett</a>
        </address>
<p>In <a href="/category/misc.html">misc</a>.</p>

</footer><!-- /.post-info -->      <h1>Editing Heat Templates with Atom</h1>
<p>Now that you're more acquainted with writing Heat templates, you might be wondering if there's a way to make writing them easier. YAML is easy to use as a template language, but as you start to write longer and more complex templates (especially if you use <a href="https://github.com/openstack/flame">Flame</a>) you might be encountering situations that make you feel like this:</p>
<p><img alt="Samir" src="https://i.ytimg.com/vi/uk5gLT2eAiA/maxresdefault.jpg"></p>
<p>Fortunately, there are tools to make it a little easier.</p>
<p>One of my favorite tools, for more than just editing Heat templates, is a text editor called Atom. Yes, a text editor. "But Garett, I already have Notepad", or "I have Wordpad with rich text editing", or maybe even, "I'll use Microsoft Word, I already use it for all my reports, graphic design, and even screenshots!". As amazing and misused as those tools are, there are actually tools made <em>just</em> for editing code like YAML. Take a look.</p>
<h3>Install Atom</h3>
<p>Go to <a href="http://atom.io/download">Atom.io</a> and hit the big "Download for xxxxx" button. After the file is finished downloading, launch it and install Atom. You should be able to accept whatever defaults it prompts you for. After installation is done, launch Atom, and there should be a blank file sitting there, waiting for your next wonderful creation.</p>
<h3>Make Atom a YAML Machine</h3>
<p>Atom comes with built-in support for YAML, which means you get syntax highlighting out of the box. If you've never experienced syntax highlighting before, here's a side by side comparison a simple heat template. The one on the left has syntax highlighting turned off, the one on the right has it turned on.</p>
<p><img alt="better with colors" src="http://image.prntscr.com/image/7e08e89cc1b741b794432e207306d219.jpg"></p>
<p>That is so much easier to read. Next, let's add a package to Atom that will catch a lot of syntax errors that usually cause problems in larger YAML files. Press <code>Ctrl+,</code> on Windows, or <code>Cmd+,</code> on Mac, which will pull up the Settings tab. On the left side of the tab, click on "Install" button, then in the search box type <code>linter-js-yaml</code> and hit enter. The first result that comes up should be a package called, fittingly, "linter-js-yaml". Hit the install button, then wait for it complete. When it's done, copy the below code (which is the same used in the image above, with some mines laid out for you):</p>
<div class="highlight"><pre><span></span><span class="c1">### Heat Template ###</span>
<span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">yaml demo in Atom</span>
<span class="l l-Scalar l-Scalar-Plain">heat_template_version 2013-05-23</span>

<span class="l l-Scalar l-Scalar-Plain">parameters</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">my_flavor</span><span class="p p-Indicator">:</span>
    <span class="l l-Scalar l-Scalar-Plain">type:string</span>
    <span class="l l-Scalar l-Scalar-Plain">description</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">VM instance flavor</span>

<span class="l l-Scalar l-Scalar-Plain">resources</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">enigma</span><span class="p p-Indicator">:</span>
  <span class="l l-Scalar l-Scalar-Plain">properties</span><span class="p p-Indicator">:</span>
      <span class="l l-Scalar l-Scalar-Plain">diskConfig</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">AUTO</span>
      <span class="l l-Scalar l-Scalar-Plain">flavor</span><span class="p p-Indicator">:</span> <span class="p p-Indicator">{</span> <span class="nv">get_param|my_flavor</span> <span class="p p-Indicator">}</span>
      <span class="l l-Scalar l-Scalar-Plain">image</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">HAL_bae</span>
      <span class="l l-Scalar l-Scalar-Plain">key_name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">garettkey</span>
      <span class="l l-Scalar l-Scalar-Plain">name</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">enigma</span>
      <span class="l l-Scalar l-Scalar-Plain">networks</span><span class="p p-Indicator">:</span>
      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">network</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">skynet</span>
  <span class=" -Error">  </span><span class="l l-Scalar l-Scalar-Plain">type</span><span class="p p-Indicator">:</span> <span class="l l-Scalar l-Scalar-Plain">OS::Nova::Server</span>
</pre></div>


<p>If you plug this into a file in Atom and name the file <em>anything</em>.yaml (that is, name it whatever you want, just add the .yaml extension) and your new-fangled linter should pop should show some errors. Look near the bottom of the screen and you'll see something similar to the following:</p>
<p><img alt="errors!" src="http://image.prntscr.com/image/3c7569f4a3bc4dd9827ef87298114da2.png"></p>
<p>Click on the text that says "# Issue" and a little box will pop up giving you a clue as to what is wrong.</p>
<p><img alt="tell me what's wrong baby" src="http://image.prntscr.com/image/71ebfaf4b15644d2bedf7752b7375988.png"></p>
<p>What does that mean? Well, thanks to syntax highlighting, if we look at the text above, we can see that pattern of colors is broken up by that plain, boring grey color. This should give you a clue as to what's wrong. A lot of YAML consists of defining parameters in a <code>key: value</code> layout. What we're missing on the line above is a colon! Add that colon, then wait a second to see if the linter finds anything else. You'll find that as you correct one issue, the linter might find another. Just as in real life, it might feel like you're going down a rabbit-hole of your own mistakes, but don't worry, it's just a YAML file. No one will judge you for it (unless you go ahead and run your Heat template knowing that there are errors in it, then your boss might be upset). Just keep correcting errors until you're not seeing anymore errors. And then to be safe, you can do a dry-run:</p>
<div class="highlight"><pre><span></span>heat stack-preview -f anything.yaml newstack
</pre></div>


<p>Or if you're using the new unified command line tool (Oslo):</p>
<div class="highlight"><pre><span></span>openstack stack create -t anything.yaml --dry-run newstack
</pre></div>


<h3>The End</h3>
<p>I hope you'll find Atom useful both in writing Heat templates, and any other coding work. Leave a comment if there's any other guide you'd like to see for Atom.</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a href="http://getpelican.com/">Pelican</a></li>
                            <li><a href="http://python.org/">Python.org</a></li>
                            <li><a href="http://jinja.pocoo.org/">Jinja2</a></li>
                            <li><a href="#">You can modify those links in your config file</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>

                            <li><a href="#">You can add links in your config file</a></li>
                            <li><a href="#">Another social link</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>